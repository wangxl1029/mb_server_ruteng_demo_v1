
////////////////////////////////////////////////////////////////////////////////
//
// All Rights Reserved, Copyright(C),2013
// Licenced Material of by zhaoyiwei
// This file is auto generated by IOLibMaker, Do NOT modify
//
////////////////////////////////////////////////////////////////////////////////
//
// SubSystem: NDS_UpdDownloadInfoNDS_UpdDownloadInfoのデ`タアクセス用のライブラリ
// Class Name:    NDS_UpdDownloadInfoNDS_UpdDownloadInfoのiみzむ用のクラス
//
////////////////////////////////////////////////////////////////////////////////
#include	"InnerCommon.h"
#include	"NDS_UpdCommon_Struct.h"
#include	"NDS_UpdCommon_Reader.h"
#include	"NDS_UpdDownloadInfo_Struct.h"
#include	"NDS_UpdDownloadInfo_Reader.h"


////////////////////////////////////////////////////////////////////////////////
//
// Function: NDS_UpdDownloadInfoNDS_UpdDownloadInfoコンストラクタ`
// Detail: NDS_UpdDownloadInfoNDS_UpdDownloadInfoクラスの初期化
// Return:None
////////////////////////////////////////////////////////////////////////////////
CNDS_UpdDownloadInfo_Reader::CNDS_UpdDownloadInfo_Reader()
{
}


////////////////////////////////////////////////////////////////////////////////
//
// Function: NDS_UpdDownloadInfoNDS_UpdDownloadInfoコンストラクタ`
// Detail: NDS_UpdDownloadInfoNDS_UpdDownloadInfoクラスの初期化
// Return:None
////////////////////////////////////////////////////////////////////////////////
CNDS_UpdDownloadInfo_Reader::CNDS_UpdDownloadInfo_Reader( SmartPointer<CMyIfstream> &pclStream )
	: CIOLibBaseReader( pclStream )
{
}


////////////////////////////////////////////////////////////////////////////////
//
// Function: NDS_UpdDownloadInfoNDS_UpdDownloadInfoディストラクタ`
// Detail: NDS_UpdDownloadInfoNDS_UpdDownloadInfoクラスの削除
// Return:None
////////////////////////////////////////////////////////////////////////////////
CNDS_UpdDownloadInfo_Reader::~CNDS_UpdDownloadInfo_Reader()
{
}



////////////////////////////////////////////////////////////////////////////////
//
// Function: Read_NDS_UpdUpdateId
// Detail: Read A NDS_UpdUpdateId Record
// Return:long 型
//               SUCCESS  : (Succeeded)             
//               FAILURE : (Failed)
////////////////////////////////////////////////////////////////////////////////
long CNDS_UpdDownloadInfo_Reader::ReadNDS_UpdUpdateId( CNDS_UpdUpdateId &clNDS_UpdUpdateId )
{
	uint64	m_ullUpdateId_REC_START_DA	= m_pclStream->GetDA();
	if( SUCCESS != m_pclStream->GetMBCString( clNDS_UpdUpdateId.m_strUpdateId, 32 ) ) {
		assert( 0 );
		return FAILURE;
	}
	if( ( m_pclStream->GetDA() - m_ullUpdateId_REC_START_DA ) % 32 > 0 ) {
		m_pclStream->Skip( 32 - ( ( m_pclStream->GetDA() - m_ullUpdateId_REC_START_DA ) % 32 ) );
	}

	return SUCCESS;
}


////////////////////////////////////////////////////////////////////////////////
//
// Function: Read_NDS_UpdDownloadInfoDataFrame
// Detail: Read A NDS_UpdDownloadInfoDataFrame Record
// Return:long 型
//               SUCCESS  : (Succeeded)             
//               FAILURE : (Failed)
////////////////////////////////////////////////////////////////////////////////
long CNDS_UpdDownloadInfo_Reader::ReadNDS_UpdDownloadInfoDataFrame( CNDS_UpdDownloadInfoDataFrame &clNDS_UpdDownloadInfoDataFrame )
{
	if( SUCCESS != ReadNDS_UpdUpdateId( clNDS_UpdDownloadInfoDataFrame.m_clUpdateId ) ) {
		assert( 0 );
		return FAILURE;
	}

	if( SUCCESS != m_pclStream->Get4bN( clNDS_UpdDownloadInfoDataFrame.m_uiFileCount ) ) {
		assert( 0 );
		return FAILURE;
	}

	return SUCCESS;
}


////////////////////////////////////////////////////////////////////////////////
//
// Function: ReadAll
// Detail: Read whole file
// Return:long 型
//               SUCCESS  : (Succeeded)             
//               FAILURE : (Failed)
////////////////////////////////////////////////////////////////////////////////
long CNDS_UpdDownloadInfo_Reader::ReadAll( const tchar *ptcFileName, CNDS_UpdDownloadInfoDataFrame &clNDS_UpdDownloadInfoDataFrame )
{
	if( SUCCESS != Initialize( ptcFileName ) ) {
		assert( 0 );
		return FAILURE;
	}

	if( SUCCESS != ReadNDS_UpdDownloadInfoDataFrame( clNDS_UpdDownloadInfoDataFrame) ) {
		assert( 0 );
		return FAILURE;
	}

	return SUCCESS;
}

long CNDS_UpdDownloadInfo_Reader::ReadAll( const char *pcBuf, uint64 ullSize, CNDS_UpdDownloadInfoDataFrame &clNDS_UpdDownloadInfoDataFrame )
{
	if( SUCCESS != Initialize( pcBuf, ullSize ) ) {
		assert( 0 );
		return FAILURE;
	}

	if( SUCCESS != ReadNDS_UpdDownloadInfoDataFrame( clNDS_UpdDownloadInfoDataFrame) ) {
		assert( 0 );
		return FAILURE;
	}

	return SUCCESS;
}
