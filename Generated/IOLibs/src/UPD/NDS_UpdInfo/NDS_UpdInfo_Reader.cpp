
////////////////////////////////////////////////////////////////////////////////
//
// All Rights Reserved, Copyright(C),2013
// Licenced Material of by zhaoyiwei
// This file is auto generated by IOLibMaker, Do NOT modify
//
////////////////////////////////////////////////////////////////////////////////
//
// SubSystem: NDS_UpdInfoNDS_UpdInfoのデ`タアクセス用のライブラリ
// Class Name:    NDS_UpdInfoNDS_UpdInfoのiみzむ用のクラス
//
////////////////////////////////////////////////////////////////////////////////
#include	"InnerCommon.h"
#include	"NDS_UpdInfo_Struct.h"
#include	"NDS_UpdInfo_Reader.h"


////////////////////////////////////////////////////////////////////////////////
//
// Function: NDS_UpdInfoNDS_UpdInfoコンストラクタ`
// Detail: NDS_UpdInfoNDS_UpdInfoクラスの初期化
// Return:None
////////////////////////////////////////////////////////////////////////////////
CNDS_UpdInfo_Reader::CNDS_UpdInfo_Reader()
{
}


////////////////////////////////////////////////////////////////////////////////
//
// Function: NDS_UpdInfoNDS_UpdInfoコンストラクタ`
// Detail: NDS_UpdInfoNDS_UpdInfoクラスの初期化
// Return:None
////////////////////////////////////////////////////////////////////////////////
CNDS_UpdInfo_Reader::CNDS_UpdInfo_Reader( SmartPointer<CMyIfstream> &pclStream )
	: CIOLibBaseReader( pclStream )
{
}


////////////////////////////////////////////////////////////////////////////////
//
// Function: NDS_UpdInfoNDS_UpdInfoディストラクタ`
// Detail: NDS_UpdInfoNDS_UpdInfoクラスの削除
// Return:None
////////////////////////////////////////////////////////////////////////////////
CNDS_UpdInfo_Reader::~CNDS_UpdInfo_Reader()
{
}



////////////////////////////////////////////////////////////////////////////////
//
// Function: Read_NDS_UpdCateInfo
// Detail: Read A NDS_UpdCateInfo Record
// Return:long 型
//               SUCCESS  : (Succeeded)             
//               FAILURE : (Failed)
////////////////////////////////////////////////////////////////////////////////
long CNDS_UpdInfo_Reader::ReadNDS_UpdCateInfo( CNDS_UpdCateInfo &clNDS_UpdCateInfo )
{
	if( SUCCESS != m_pclStream->Get1bN( clNDS_UpdCateInfo.m_ucCategoryID ) ) {
		assert( 0 );
		return FAILURE;
	}

	if( SUCCESS != m_pclStream->Get4bN( clNDS_UpdCateInfo.m_uiDataSize ) ) {
		assert( 0 );
		return FAILURE;
	}

	if( SUCCESS != m_pclStream->Get4bN( clNDS_UpdCateInfo.m_uiAppendCount ) ) {
		assert( 0 );
		return FAILURE;
	}

	if( SUCCESS != m_pclStream->Get4bN( clNDS_UpdCateInfo.m_uiDeleteCount ) ) {
		assert( 0 );
		return FAILURE;
	}

	if( SUCCESS != m_pclStream->Get4bN( clNDS_UpdCateInfo.m_uiModifyCount ) ) {
		assert( 0 );
		return FAILURE;
	}

	return SUCCESS;
}


////////////////////////////////////////////////////////////////////////////////
//
// Function: Read_NDS_UpdateInfo
// Detail: Read A NDS_UpdateInfo Record
// Return:long 型
//               SUCCESS  : (Succeeded)             
//               FAILURE : (Failed)
////////////////////////////////////////////////////////////////////////////////
long CNDS_UpdInfo_Reader::ReadNDS_UpdateInfo( CNDS_UpdateInfo &clNDS_UpdateInfo )
{
	if( SUCCESS != m_pclStream->Get1bN( clNDS_UpdateInfo.m_ucCategoryCnt ) ) {
		assert( 0 );
		return FAILURE;
	}

	clNDS_UpdateInfo.m_vclUpdInfoList.resize( clNDS_UpdateInfo.m_ucCategoryCnt );
	uint uiNDS_UpdateInfoUpdInfoList_CUR_NO = 0;
	for( uiNDS_UpdateInfoUpdInfoList_CUR_NO = 0; uiNDS_UpdateInfoUpdInfoList_CUR_NO < (uint)(clNDS_UpdateInfo.m_vclUpdInfoList.size()); ++uiNDS_UpdateInfoUpdInfoList_CUR_NO ) {
		if( SUCCESS != ReadNDS_UpdCateInfo( clNDS_UpdateInfo.m_vclUpdInfoList[uiNDS_UpdateInfoUpdInfoList_CUR_NO] ) ) {
			assert( 0 );
			return FAILURE;
		}
	}

	return SUCCESS;
}


////////////////////////////////////////////////////////////////////////////////
//
// Function: Read_NDS_UpdRegionInfo
// Detail: Read A NDS_UpdRegionInfo Record
// Return:long 型
//               SUCCESS  : (Succeeded)             
//               FAILURE : (Failed)
////////////////////////////////////////////////////////////////////////////////
long CNDS_UpdInfo_Reader::ReadNDS_UpdRegionInfo( CNDS_UpdRegionInfo &clNDS_UpdRegionInfo )
{
	if( SUCCESS != m_pclStream->Get2bN( clNDS_UpdRegionInfo.m_usVersion ) ) {
		assert( 0 );
		return FAILURE;
	}

	if( SUCCESS != ReadNDS_UpdateInfo( clNDS_UpdRegionInfo.m_clUpdateInfo ) ) {
		assert( 0 );
		return FAILURE;
	}

	return SUCCESS;
}


////////////////////////////////////////////////////////////////////////////////
//
// Function: ReadAll
// Detail: Read whole file
// Return:long 型
//               SUCCESS  : (Succeeded)             
//               FAILURE : (Failed)
////////////////////////////////////////////////////////////////////////////////
long CNDS_UpdInfo_Reader::ReadAll( const tchar *ptcFileName, CNDS_UpdRegionInfo &clNDS_UpdRegionInfo )
{
	if( SUCCESS != Initialize( ptcFileName ) ) {
		assert( 0 );
		return FAILURE;
	}

	if( SUCCESS != ReadNDS_UpdRegionInfo( clNDS_UpdRegionInfo) ) {
		assert( 0 );
		return FAILURE;
	}

	return SUCCESS;
}

long CNDS_UpdInfo_Reader::ReadAll( const char *pcBuf, uint64 ullSize, CNDS_UpdRegionInfo &clNDS_UpdRegionInfo )
{
	if( SUCCESS != Initialize( pcBuf, ullSize ) ) {
		assert( 0 );
		return FAILURE;
	}

	if( SUCCESS != ReadNDS_UpdRegionInfo( clNDS_UpdRegionInfo) ) {
		assert( 0 );
		return FAILURE;
	}

	return SUCCESS;
}
